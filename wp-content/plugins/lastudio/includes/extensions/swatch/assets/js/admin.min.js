(function(a){'use strict';function b(b){b.closest(".woocommerce_variation").addClass("variation-needs-update"),a("button.cancel-variation-changes, button.save-variation-changes").removeAttr("disabled"),a("#variable_product_options").trigger("woocommerce_variations_input_changed")}function c(c){var d=[],e=c.find(".la_variation_image_gallery");c.find(".la_variation_thumbs .image").each(function(){d.push(a(this).attr("data-attachment_id"))}),e.val(d.join(",")),b(e)}function d(){a(".woocommerce_variable_attributes .data > .lastudio-advance-gallery-for-variation").each(function(){var b=a(this);b.appendTo(b.closest(".data").find(".form-row.upload_image")),a(".la_variation_thumbs",b).sortable({deactivate:function(b,d){var e=a(d.item).closest(".la_variation_thumb");c(e)},placeholder:"ui-state-highlight"})})}function e(){d();var g;f.on("click",".la_swatches--manage_variation_thumbs",function(c){c.preventDefault();var d=a(this),e=d.siblings(".la_variation_thumbs"),f=d.siblings(".la_variation_image_gallery"),h=f.val();return g=wp.media.frames.downloadable_file=wp.media({title:"Manage Variation Images",button:{text:"Add to variation"},multiple:!0}),g.on("select",function(){var a=g.state().get("selection");a.map(function(a){a=a.toJSON(),a.id&&(h=h?h+","+a.id:a.id,e.append("<li class=\"image\" data-attachment_id=\""+a.id+"\"><a href=\"#\" class=\"delete\" title=\"Delete image\"><span style=\"background-image: url("+a.url+")\"></span></a></li>"))}),f.val(h),b(f)}),g.open(),!1}),f.on("click",".la_variation_thumbs .delete",function(b){b.preventDefault();var d=a(this).closest(".la_variation_thumb");a(this).closest("li").remove(),c(d)}),a("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){d()}),a("#variable_product_options").on("woocommerce_variations_added",function(){d()})}if("undefined"!=typeof lastudio_swatches_vars){var f=a(document),g=a("body");a(function(){e(),a(".la_swatch_field_form_mask .field_form").lasf_reload_script(),f.on("click",".la_swatch_field_meta",function(b){b.preventDefault(),a(this).toggleClass("open-form")}).on("change",".lastudio_swatches .fields .sub_field select",function(){var b=a(this);b.closest(".sub_field").find(".attribute_swatch_type").html(b.find("option:selected").text()),"color"==b.val()?(b.closest(".sub_field").find(".attr-prev-type-color").show(),b.closest(".sub_field").find(".attr-prev-type-image").hide()):(b.closest(".sub_field").find(".attr-prev-type-color").hide(),b.closest(".sub_field").find(".attr-prev-type-image").show())}).on("change",".lastudio_swatches .fields .sub_field input.wp-color-picker",function(){var b=a(this);b.closest(".sub_field").find(".attr-prev-type-color").css("background-color",b.val())}).on("change",".lastudio_swatches .fields .sub_field .lasf-field-media input",function(){var b=a(this);b.closest(".sub_field").find(".attr-prev-type-image").html(b.closest(".lasf-fieldset").find(".lasf--preview").html())}).on("change",".lastudio_swatches .fields .lasf-parent-type-class",function(){var b=a(this);b.closest(".field").find("> .la_swatch_field_meta .attribute_swatch_type").html(b.find("option:selected").text())}).on("reload","#variable_product_options",function(){if(0!=a("#panel_la_swatches_inner").length){a("#woocommerce-product-data").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var b=window.location.toString().replace("post-new.php?","post.php?post="+woocommerce_admin_meta_boxes.post_id+"&action=edit&");a("#lastudio_swatches").load(b+" #panel_la_swatches_inner",function(){a("#lastudio_swatches").trigger("reload"),a(".la_swatch_field_form_mask .field_form").lasf_reload_script()})}}).on("woocommerce_variations_saved","#woocommerce-product-data",function(){if(0!=a("#panel_la_swatches_inner").length){a("#woocommerce-product-data").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var b=window.location.toString().replace("post-new.php?","post.php?post="+woocommerce_admin_meta_boxes.post_id+"&action=edit&");a("#lastudio_swatches").load(b+" #panel_la_swatches_inner",function(){a("#lastudio_swatches").trigger("reload"),a(".la_swatch_field_form_mask .field_form").lasf_reload_script()})}})})}})(jQuery);