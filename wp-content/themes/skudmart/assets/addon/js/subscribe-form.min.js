(function(a,b){"use strict";var c={noticeCreate:function(b,c,d){var e,f,g=0;return!!(c&&"true"!==(d||!1))&&void(e=a("<div class=\"lastudio-handler-notice "+b+"\"><span class=\"dashicons\"></span><div class=\"inner\">"+c+"</div></div>"),a("body").prepend(e),function(){var b=100;a(".lastudio-handler-notice").each(function(){a(this).css({top:b}),b+=a(this).outerHeight(!0)})}(),g=-1*(e.outerWidth(!0)+10),e.css({right:g}),f=setTimeout(function(){e.css({right:10}).addClass("show-state")},100),f=setTimeout(function(){g=-1*(e.outerWidth(!0)+10),e.css({right:g}).removeClass("show-state")},4e3),f=setTimeout(function(){e.remove(),clearTimeout(f)},4500))},serializeObject:function(b){var c=this,d={},e={},f={validate:/^[a-zA-Z][a-zA-Z0-9_-]*(?:\[(?:\d*|[a-zA-Z0-9_-]+)\])*$/,key:/[a-zA-Z0-9_-]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_-]+$/};return this.build=function(a,b,c){return a[b]=c,a},this.push_counter=function(a){return void 0===e[a]&&(e[a]=0),e[a]++},a.each(b.serializeArray(),function(){var b,e,g,h;if(f.validate.test(this.name)){for(e=this.name.match(f.key),g=this.value,h=this.name;void 0!==(b=e.pop());)h=h.replace(new RegExp("\\["+b+"\\]$"),""),b.match(f.push)?g=c.build([],c.push_counter(h),g):b.match(f.fixed)?g=c.build([],b,g):b.match(f.named)&&(g=c.build({},b,g));d=a.extend(!0,d,g)}}),d}},d=function(b){var d=this,e={handlerId:"",cache:!1,processData:!0,url:"",async:!1,beforeSendCallback:function(){},errorCallback:function(){},successCallback:function(){},completeCallback:function(){}};return b&&a.extend(e,b),window[e.handlerId]?void(d.handlerSettings=window[e.handlerId]||{},d.ajaxRequest=null,d.ajaxProcessing=!1,d.data={action:d.handlerSettings.action,nonce:d.handlerSettings.nonce},""===e.url&&("false"===d.handlerSettings.is_public?e.url=window.LaStudioElementConfigs.ajaxurl:e.url=window.LaStudioElementConfigs.ajaxurl),d.send=function(){d.ajaxProcessing&&c.noticeCreate("error-notice",d.handlerSettings.sys_messages.wait_processing,d.handlerSettings.is_public),d.ajaxProcessing=!0,d.ajaxRequest=jQuery.ajax({type:d.handlerSettings.type,url:e.url,data:d.data,cache:e.cache,dataType:d.handlerSettings.data_type,processData:e.processData,beforeSend:function(a,b){null===d.ajaxRequest||e.async||d.ajaxRequest.abort(),e.beforeSendCallback&&"function"==typeof e.beforeSendCallback&&e.beforeSendCallback(a,b)},error:function(b,c,d){a(document).trigger({type:"lastudio-ajax-handler-error",jqXHR:b,textStatus:c,errorThrown:d}),e.errorCallback&&"function"==typeof e.errorCallback&&e.errorCallback(b,c,d)},success:function(b,f,g){d.ajaxProcessing=!1,a(document).trigger({type:"lastudio-ajax-handler-success",response:b,jqXHR:g,textStatus:f}),e.successCallback&&"function"==typeof e.successCallback&&e.successCallback(b,f,g),c.noticeCreate(b.type,b.message,d.handlerSettings.is_public)},complete:function(b,c){a(document).trigger({type:"lastudio-ajax-handler-complete",jqXHR:b,textStatus:c}),e.completeCallback&&"function"==typeof e.completeCallback&&e.completeCallback(b,c)}})},d.sendData=function(a){d.data={action:d.handlerSettings.action,nonce:d.handlerSettings.nonce,data:a||{}},d.send()},d.sendFormData=function(b){var e,f=a(b);e=c.serializeObject(f),d.sendData(e)}):(window.console&&window.console.warn("Handler id not found"),!1)};a(window).on("elementor/frontend/init",function(){b.hooks.addAction("frontend/element_ready/lastudio-subscribe-form.default",function(b){function c(){var b=j.val(),c={email:b,use_target_list_id:g.use_target_list_id||!1,target_list_id:g.target_list_id||"",data:k},d=h.serializeArray(),f={};window.LaStudioElementTools.validateEmail(b)?(a.each(d,function(a,b){"email"===b.name?c[b.name]=b.value:f[b.name]=b.value}),c.additional=f,p.sendData(c),l.addClass("loading")):(j.addClass("mail-invalid"),e.addClass("lastudio-subscribe-form--response-error"),a("span",m).html(o),m.css({visibility:"visible"}),n=setTimeout(function(){e.removeClass("lastudio-subscribe-form--response-error"),m.css({visibility:"hidden"}),j.removeClass("mail-invalid")},2e4))}var e=b.find(".lastudio-subscribe-form"),f=b.data("id"),g=e.data("settings"),h=a(".lastudio-subscribe-form__form",e),i=a(".lastudio-subscribe-form__fields",e),j=a(".lastudio-subscribe-form__mail-field",e),k=j.data("instance-data"),l=a(".lastudio-subscribe-form__submit",e),m=a(".lastudio-subscribe-form__message",e),n=null,o=window.lastudio_elementor_subscribe_form_ajax.sys_messages.invalid_mail||window.LaStudioElementConfigs.invalidMail,p=new d({handlerId:"lastudio_elementor_subscribe_form_ajax",successCallback:function(b){var c=b.type,d=b.message||"",h="lastudio-subscribe-form--response-"+c;l.removeClass("loading"),e.removeClass("lastudio-subscribe-form--response-error"),e.addClass(h),a("span",m).html(d),m.css({visibility:"visible"}),n=setTimeout(function(){m.css({visibility:"hidden"}),e.removeClass(h)},2e4),g.redirect&&(window.location.href=g.redirect_url),a(window).trigger({type:"LaStudioElement/subscribe",elementId:f,successType:c,inputData:k})}});j.on("focus",function(){j.removeClass("mail-invalid")}),a(document).keydown(function(a){if(13===a.keyCode&&j.is(":focus"))return c(),!1}),l.on("click",function(){return c(),!1})})})})(jQuery,window.elementorFrontend);